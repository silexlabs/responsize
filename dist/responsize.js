var f=this;function g(a,b){var c=a.split("."),d=f;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)c.length||void 0===b?d=d[e]?d[e]:d[e]={}:d[e]=b};function l(){this.Q=window.ce.api.CloudExplorer.get("ce-js");this.w=null}g("FileService",l);l.prototype.open=function(){var a=this;return new Promise(function(b,c){a.Q.pick(function(c){console.log("my Blob: "+JSON.stringify(c));a.w=c;b(c.url)},function(a){console.log("error "+JSON.stringify(a));c(a)})})};l.prototype.open=l.prototype.open;
l.prototype.save=function(a){var b=this;return new Promise(function(c,d){console.log("fileService save",a,b.w);b.Q.write(b.w,a,function(a){console.log("my Blob: "+JSON.stringify(a));b.w=a;c(a.url)},function(a){console.log("error "+JSON.stringify(a));d(a)})})};l.prototype.save=l.prototype.save;function m(a,b){for(var c=n(b),d=1;12>=d;d++)a.classList.remove(c+d)}function n(a){var b="col-xs-";1200<=a?b="col-lg-":992<=a?b="col-md-":768<=a&&(b="col-sm-");return b};function p(a){this.element=a;this.a=a.getElementsByTagName("iframe")[0];this.height=this.width=1;this.O=!0;window.addEventListener("resize",this.e.bind(this))}g("Stage",p);p.prototype.ca=function(a,b){this.O=!1;this.width=a;this.height=b;this.e()};p.prototype.setSize=p.prototype.ca;p.prototype.A=function(){return{width:this.width,height:this.height}};p.prototype.getSize=p.prototype.A;
p.prototype.U=function(){for(var a=null,b=null,c=null,d=null,e=this.a.contentDocument.querySelectorAll("*"),h=0;h<e.length;h++){var k=e[h];if(null===a||k.offsetLeft<a)a=k.offsetLeft;if(null===c||k.offsetTop<c)c=k.offsetTop;k.offsetLeft+k.offsetWidth>b&&(b=k.offsetLeft+k.offsetWidth);k.offsetTop+k.offsetHeight>d&&(d=k.offsetTop+k.offsetHeight)}return{pa:b-a,ia:d-c}};p.prototype.getContentSize=p.prototype.U;
p.prototype.e=function(){if(this.O){var a=this.U();this.width=a.pa;this.height=a.ia}this.a.style.width=this.width+"px";this.a.style.height=this.height+"px";var a=this.element.offsetWidth,b=this.element.offsetHeight,c=Math.min(1,a/this.width,b/this.height);this.a.style.transform="scale("+c+")";this.a.style.transformOrigin="0 0";b=(b-this.height*c)/2;this.a.style.left=(a-this.width*c)/2+"px";this.a.style.top=b+"px"};p.prototype.redraw=p.prototype.e;
p.prototype.j=function(a){a?this.a.parentNode.classList.add("rsz-loading"):this.a.parentNode.classList.remove("rsz-loading")};p.prototype.setLoading=p.prototype.j;p.prototype.da=function(a){var b=this;return new Promise(function(c,d){b.j(!0);b.a.onload=function(){b.j(!1);b.e();c(b.a.contentDocument)};b.a.onerror=function(a){b.j(!1);d(a)};b.a.src=a})};p.prototype.setUrl=p.prototype.da;p.prototype.fa=function(){return this.a.contentDocument.documentElement.outerHTML};p.prototype.getHtml=p.prototype.fa;
p.prototype.ma=function(a){var b=this;return new Promise(function(c,d){b.j(!0);b.a.onload=function(){b.j(!1);""!==a&&(b.a.src="",b.a.contentDocument.write(a));b.e();c(b.a.contentDocument)};b.a.onerror=function(a){b.j(!1);d(a)};b.a.src="about:blank"})};p.prototype.setHtml=p.prototype.ma;g("Device",{ra:0,sa:1,ta:2,ua:3,qa:4});var r=[{name:"mobile",width:320,height:480},{name:"mobile-h",width:476,height:320},{name:"tablet",width:769,height:1024},{name:"tablet-h",width:1024,height:769},{name:"desktop",width:1280,height:800}];g("DeviceData",r);
function s(a){var b=this;this.element=a;this.element.querySelector(".open");this.$=this.element.querySelector(".save");this.P=this.element.querySelector(".clear-formatting");this.selection=[];this.I=this.F=this.q=this.k=null;this.element.addEventListener("click",function(a){return t(b,a)})}g("Toolbar",s);function u(a,b){b?a.$.classList.remove("off"):a.$.classList.add("off")}
function t(a,b){var c=b.target;c.classList.contains("open")&&a.k&&a.k();c.classList.contains("save")&&a.q&&a.q();c.classList.contains("clear-formatting")?a.F&&a.selection.forEach(function(b){return a.F(b)}):c.classList.contains("mobile")?a.i(0):c.classList.contains("mobile-h")?a.i(1):c.classList.contains("tablet")?a.i(2):c.classList.contains("tablet-h")?a.i(3):c.classList.contains("desktop")&&a.i(4);b.preventDefault();return!1}
s.prototype.i=function(a){for(var b=this.element.querySelectorAll(".selected"),c=0;c<b.length;c++)b.item(c).classList.remove("selected");this.element.querySelector("."+r[a].name).classList.add("selected");this.I&&this.I(r[a].width,r[a].height)};s.prototype.setDevice=s.prototype.i;s.prototype.K=function(a){this.selection=a;this.e()};s.prototype.setSelection=s.prototype.K;s.prototype.e=function(){this.selection&&0<this.selection.length?this.P.classList.remove("off"):this.P.classList.add("off")};
s.prototype.redraw=s.prototype.e;function v(){this.M=[];this.ka=0}g("RszDom",v);function x(a,b){a.M.forEach(function(a){a=b.querySelector("#"+a.id);a.parentNode.removeChild(a)});for(var c=b.querySelectorAll(".rsz-select-candidate, .rsz-selected"),d=0;d<c.length;d++)c[d].classList.remove("rsz-selected"),c[d].classList.remove("rsz-select-candidate")}function y(a,b){a.M.forEach(function(a){return b.querySelector("head").appendChild(a.cloneNode(!0))})}v.prototype.C=function(a,b){b.id="rsz-"+this.ka++;this.M.push(b);a&&a.head.appendChild(b.cloneNode(!0))};
v.prototype.addTempElement=v.prototype.C;function z(){this.g=null;this.d=this.B=!1}g("RszSelection",z);z.prototype.reset=function(a){this.B=!1;A(this,a)};z.prototype.n=function(){this.B=!0;return!1};z.prototype.o=function(a,b){if(this.B)this.d||(this.d=!0);else{for(var c=a.querySelectorAll(".rsz-select-candidate"),d=0;d<c.length;d++)c[d].classList.remove("rsz-select-candidate");b.classList.add("rsz-select-candidate")}return!1};
z.prototype.p=function(a,b,c,d,e){this.B=!1;if(this.d)this.d=!1;else return e||this.f(a).forEach(function(a){a!=b&&B(a)}),this.select(b),!0;return!1};z.prototype.f=function(a){if(a){a=a.querySelectorAll(".rsz-selected");for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b}return[]};z.prototype.getSelected=z.prototype.f;z.prototype.select=function(a,b){a.classList.contains("rsz-selected")||(a.classList.add("rsz-selected"),!1!==b&&this.g&&this.g())};
function B(a){a.classList.contains("rsz-selected")&&a.classList.remove("rsz-selected")}function A(a,b){a.f(b).forEach(function(a){B(a)})};function C(){this.v=5;this.g=null;this.d=!1;this.b=null;this.D=-1}g("RszResize",C);C.prototype.n=function(a,b,c,d){a=b.getBoundingClientRect();this.D=D(this,a,c,d);this.b=-1!==this.D?b:null;return!1};
C.prototype.o=function(a,b,c,d,e,h){switch(D(this,b.getBoundingClientRect(),c,d)){case 1:case 3:a.body.classList.add("rsz-resize-ew");break;case 0:case 2:a.body.classList.add("rsz-resize-ns");break;case -1:a.body.classList.remove("rsz-resize-ew"),a.body.classList.remove("rsz-resize-ns")}if(null!==this.b){this.d||(this.d=!0);a=this.b.getBoundingClientRect();a={left:a.left,right:a.right,top:a.top,bottom:a.bottom};switch(this.D){case 1:a.left=c;break;case 3:a.right=c;break;case 0:a.top=d;break;case 2:a.bottom=
d}c=a;h&&(c=h(this.b,c));h=this.b.parentNode.getBoundingClientRect();c&&(this.b.style.left=c.left-h.left+"px",this.b.style.top=c.top-h.top+"px",this.b.style.width=c.right-c.left+"px",this.b.style.height=c.bottom-c.top+"px");return!0}return!1};C.prototype.p=function(){return this.b&&this.d?(this.d=!1,this.b=null,this.g&&this.g(this.b),!0):!1};
function D(a,b,c,d){c-=b.left;d-=b.top;var e=b.right-b.left;b=b.bottom-b.top;var h=-1;c<a.v&&0<c&&d<b&&0<d?h=1:c<e&&c>e-a.v&&d<b&&0<d?h=3:d<a.v&&0<d&&c<e&&0<c?h=0:d<b&&d>b-a.v&&c<e&&0<c&&(h=2);return h};function E(){this.S=this.t=this.document=this.G=this.H=null;this.W=this.n.bind(this);this.Y=this.p.bind(this);this.X=this.o.bind(this);this.Z=this.preventDefault.bind(this);this.h=new z;this.J=new C;this.r=this.l=!1;this.s=new v}g("Wysiwyg",E);E.prototype.na=function(a){return this.h.g=a};E.prototype.setOnSelect=E.prototype.na;E.prototype.ga=function(){return this.h.g};E.prototype.getOnSelect=E.prototype.ga;E.prototype.oa=function(a){return this.t=a};E.prototype.setSelectFilter=E.prototype.oa;
E.prototype.ha=function(){return this.t};E.prototype.getSelectFilter=E.prototype.ha;E.prototype.T=function(){var a=this.document.documentElement.cloneNode(!0);x(this.s,a);return a.outerHTML};E.prototype.getCleanHtml=E.prototype.T;
E.prototype.aa=function(a){this.document&&(this.document.removeEventListener("mousedown",this.W),this.document.removeEventListener("mouseup",this.Y),this.document.removeEventListener("mousemove",this.X),this.document.removeEventListener("click",this.Z,!0),x(this.s,this.document.documentElement));this.h.reset(this.document);this.document=a;this.L(this.l);this.document.addEventListener("mouseup",this.Y,!0);this.document.addEventListener("mousedown",this.W);this.document.addEventListener("mousemove",
this.X);this.document.addEventListener("click",this.Z,!0);y(this.s,this.document.documentElement)};E.prototype.setDocument=E.prototype.aa;E.prototype.L=function(a){this.l=a};E.prototype.setSelectionMode=E.prototype.L;E.prototype.ba=function(a){this.r=a};E.prototype.setResizeMode=E.prototype.ba;E.prototype.m=function(a){for(var b=a;b&&this.t&&!this.t(b);)b=b.parentNode;return b||a};E.prototype.getBestElement=E.prototype.m;
E.prototype.N=function(a){var b=document.createElement("link");b.setAttribute("rel","stylesheet");b.setAttribute("type","text/css");b.setAttribute("href",a);this.s.C(this.document,b)};E.prototype.addTempStyle=E.prototype.N;E.prototype.ea=function(a){var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("src",a);this.s.C(this.document,b)};E.prototype.addTempScript=E.prototype.ea;E.prototype.preventDefault=function(a){if(this.l||this.r)a.stopPropagation(),a.preventDefault()};
E.prototype.p=function(a){if(this.document){var b=this.m(a.target);this.l&&this.h.p(this.document,this.m(a.target),a.clientX,a.clientY,a.shiftKey)&&this.H&&this.H();this.r&&(a=this.J.p(this.document,b,a.clientX,a.clientY,a.shiftKey),this.G&&a&&this.G())}};E.prototype.n=function(a){if(this.document){var b=this.m(a.target);this.l&&this.h.n(this.document,b,a.clientX,a.clientY,a.shiftKey);this.r&&this.J.n(this.document,b,a.clientX,a.clientY,a.shiftKey)}};
E.prototype.o=function(a){if(this.document){var b=!1,c=this.m(a.target);this.l&&(b=b||this.h.o(this.document,c,a.clientX,a.clientY,a.shiftKey));this.r&&(b=b||this.J.o(this.document,c,a.clientX,a.clientY,a.shiftKey,this.S));b&&this.preventDefault(a)}};E.prototype.f=function(){return this.h.f(this.document)};E.prototype.getSelected=E.prototype.f;function F(a){var b=this;this.toolbar=new s(a.querySelector("#toolbar"));this.u=new p(a.querySelector("#stage"));this.c=new E;this.R=new l;this.toolbar.I=function(a,d){return b.u.ca(a,d)};this.toolbar.k=function(){return b.R.open().then(function(a){return b.k(a)})};this.toolbar.F=function(a){return m(a,b.u.A().width)};this.toolbar.q=function(){return b.R.save(b.c.T()).then(function(){return b.q()})};this.c.t=function(a){return b.V(a)};this.c.H=function(){b.toolbar.K(b.c.f());u(b.toolbar,!0)};this.c.S=
function(a,d){u(b.toolbar,!0);var e=d.right-d.left,h=b.u.A().width,k=a.parentNode.getBoundingClientRect(),e=Math.max(1,Math.round(e/Math.round((k.right-k.left)/12))),e=Math.min(12,e);m(a,h);a.classList.add(n(h)+e);return null};this.c.G=function(){};this.c.L(!0);this.c.ba(!0);this.toolbar.i(4);this.c.N(window.location.href+"iframe.css")}
F.prototype.ja=function(a){if(a&&a.parentNode&&a.parentNode.childNodes){var b=0,c;for(c in a.parentNode.childNodes)1===a.parentNode.childNodes[c].nodeType&&b++;return 1<b}return!1};g("App.prototype.hasSiblings",F.prototype.ja);F.prototype.V=function(a){return a&&a.parentNode&&a.parentNode.classList&&a.parentNode.classList.contains("row")};g("App.prototype.isBootstrapCol",F.prototype.V);
F.prototype.k=function(a){var b=this;this.u.da(a).then(function(a){var d=b.u.A().width;if(a.querySelector("meta[content~=Silex]")){var e=a.querySelector("head style#responsize-style");console.log("importSilex",e);if(null===e){e=a.createElement("link");e.rel="stylesheet";e.href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css";e.media="(max-width: 1024px)";a.head.appendChild(e);e=a.createElement("script");e.src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js";
a.head.appendChild(e);e=a.createElement("style");e.innerHTML="          @media (max-width: 1024px) {            .bg{              opacity: 1 !important;            }            body, .container .editable-style{              position: relative;              max-width: 100%;              top: auto;              left: auto;              height: auto;              top: initial;              left: initial;              height: initial;              margin: 0;              padding: 0;            }            .container .editable-style .silex-element-content{              height: auto !important;              height: initial !important;            }            .container .element-5, body, .container .element-6{              width: 100%;            }          }        ";
e.id="responsize-style";a.head.appendChild(e);for(var e=Math.round(d/12),d=[],h=a.querySelectorAll(".editable-style"),k=0;k<h.length;k++){var w=h[k],q=w.getBoundingClientRect(),q=q.right-q.left;w.parentNode.getBoundingClientRect();q=Math.max(1,Math.round(q/e));q=Math.min(12,q);d.push({element:w,la:q})}console.log("importSilex elements",d);for(var G in d)e=d[G],e.element.classList.contains("background")||e.element.classList.add("col-md-"+e.la),e.element.classList.contains("container-element")&&"body"!==
e.element.tagName.toLowerCase()&&e.element.classList.add("row");a.body.classList.add("container")}}console.log("importSilex done",a.body);b.c.aa(a);b.toolbar.K([])})};F.prototype.q=function(){u(this.toolbar,!1)};window.initResponsizeApp=function(){var a=new F(document.getElementById("rsz-app")),b=H();b.url&&setTimeout(function(){return a.k(b.url)},1E3)};function H(){for(var a=document.location.search,a=a.split("+").join(" "),b={},c,d=/[?&]?([^=]+)=([^&]*)/g;c=d.exec(a);)b[decodeURIComponent(c[1])]=decodeURIComponent(c[2]);return b};
/*
//@ sourceMappingURL=responsize.js.map
*/